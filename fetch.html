<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Головна</a></li>
            <li><a href="promise.html">Робота з Promise</a></li>
            <li><a href="fetch.html">Отримання даних з API</a></li>
        </ul>
    </nav>

    <h1>Отримання постів</h1>

    <!-- Кнопка для отримання постів -->
    <button id="fetchPostsBtn">Отримати пости</button>

    <!-- Індикатор завантаження -->
    <div id="loading" style="display:none;">Завантаження...</div>

    <!-- Список постів -->
    <ul id="postsList"></ul>

    <!-- Детальний перегляд поста -->
    <div id="postDetails" style="display:none;">
        <h2>Деталі поста</h2>
        <p id="postTitle"></p>
        <p id="postBody"></p>
    </div>

    <script>
        // Отримання постів з API
        document.getElementById('fetchPostsBtn').addEventListener('click', function() {
            const postsList = document.getElementById('postsList');
            const loadingIndicator = document.getElementById('loading');
            const postDetails = document.getElementById('postDetails');
            const postTitle = document.getElementById('postTitle');
            const postBody = document.getElementById('postBody');

            // Показуємо індикатор завантаження
            loadingIndicator.style.display = 'block';

            // Очищаємо старий список постів і деталі
            postsList.innerHTML = '';
            postDetails.style.display = 'none';

            // Використовуємо fetch для отримання даних
            fetch('https://jsonplaceholder.typicode.com/posts')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Щось пішло не так з запитом');
                    }
                    return response.json();
                })
                .then(data => {
                    // Приховуємо індикатор завантаження
                    loadingIndicator.style.display = 'none';

                    // Виводимо заголовки постів у список
                    data.forEach(post => {
                        const listItem = document.createElement('li');
                        listItem.textContent = post.title;
                        listItem.addEventListener('click', () => {
                            // Показуємо деталі поста
                            postTitle.textContent = post.title;
                            postBody.textContent = post.body;
                            postDetails.style.display = 'block';
                        });
                        postsList.appendChild(listItem);
                    });
                })
                .catch(error => {
                    // Приховуємо індикатор завантаження і виводимо помилку
                    loadingIndicator.style.display = 'none';
                    alert('Помилка: ' + error.message);
                });
        });
    </script>
</body>
</html>
